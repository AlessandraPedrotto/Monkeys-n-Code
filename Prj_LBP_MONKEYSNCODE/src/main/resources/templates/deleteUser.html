<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cancella Account</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
	<style>
        .deck-img {
		    width: 70px; /* Cambia questo valore in base alle tue esigenze */
		    height: auto; /* Mantiene le proporzioni dell'immagine */
		}
		.card-image, .deck-img {
            transition: transform 0.3s ease; /* Transizione fluida per l'ingrandimento */
        }
        
        .card-image:hover, .deck-img:hover {
            transform: scale(1.5); /* Ingrandimento al passaggio del mouse */
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="card">
                    <div class="card-body text-center">
                        <h4 class="card-title">Sei sicuro di voler cancellare l'account?</h4>
                        <p class="card-text">Questa azione è irreversibile e non può essere annullata.</p>
                        <br>
                        <!-- Form per la cancellazione dell'account -->
                        <form action="http://localhost:8080/profile/delete" method="post">
                            <!-- Thymeleaf: Variabile nascosta userId -->
                            <input type="hidden" name="userId" th:value="${userId}">

                            <button type="submit" class="btn btn-danger">Cancella Account</button>
                            <a href="http://localhost:8080/profile" class="btn btn-secondary">Annulla</a>
                            
                        </form>
                        <br>
                        <h4>Stai andando a cancellare queste informazioni:</h4>
                        <p>Nome utente: <span th:text="${userName}"></span></p>
						<p>Email: <span th:text="${userEmail}"></span></p>
                        <h6>Mazzi creati:</h6>
                        <table class="table">
						    <thead>
						        <tr>
						        	<th>Immagine</th>
						            <th>Nome Mazzo</th>
						            <th>Valido</th>
						        </tr>
						    </thead>
							    <tbody>
								    <tr th:if="${decks.size() == 0}">
							            <td colspan="3" class="text-center">Non hai ancora dei mazzi</td>
							        </tr>
							     	<tr th:each="deck : ${decks}">
								    	<td>
							                <a th:href="@{/decks/yourdeck/1/{deckId}(deckId=${deck.id})}">
							                    <img th:src="@{${deck.deckImg.imgDeckPath}}" alt="Deck Image" class="img-fluid deck-img" onerror="this.onerror=null; this.src='path/to/default/image.jpg';">
							                </a>
							            </td>
							            <td th:text="${deck.nameDeck}">Nome Mazzo</td>
							            <td th:text="${deck.valid ? 'Sì' : 'No'}">Valido</td>
							        </tr>
							    </tbody>
						</table>

                        <h6>Carte nella collezione:</h6>
                        
						<h6 th:if="${userCards.size() > 0}">Totale carte nella collezione: <span th:text="${totalCards}"></span></h6>
                        <p th:if="${userCards.size() == 0}">Non possiedi ancora carte</p>
                        <div class="d-flex flex-wrap justify-content-start">
						    <div th:each="userCard : ${userCards}" class="m-1" style="width: 10%;">
						       
						            <img th:src="@{${userCard.card.img}}" alt="Card Image" class="img-fluid card-image" style="width: 100%; height: auto;" /> <!-- 100% per occupare l'intera larghezza -->
						       
						        <div th:text="${userCard.card.name}" class="text-center mt-1"></div> <!-- Nome carta sotto l'immagine -->
						        <div th:text="'Quantità: ' + ${userCard.cardQuantity}" class="text-center"></div> <!-- Quantità sotto il nome -->
						    </div>
						</div>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS (opzionale) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
